# Analytics Setup Guide

## üéØ Overview

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–≤–∏–¥–∂–µ—Ç–æ–≤. –î–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç:

- **Views today** - –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- **Total uses** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- **Avg. session** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚ö° Quick Setup

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `lib/db/analytics-schema.sql` –≤ –∫–æ–Ω—Å–æ–ª–∏
Neon PostgreSQL:

```sql
-- –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã usage_events –∏ daily_widget_stats
-- –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
-- –°–æ–∑–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

- `POST /api/analytics/track` - –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å–æ–±—ã—Ç–∏–π
- `GET /api/analytics/stats/[widgetId]` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 3. –î–∞–Ω–Ω—ã–µ –Ω–∞—á–Ω—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–π
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (user-agent, —ç–∫—Ä–∞–Ω, –ª–æ–∫–∞–ª—å)

## üèóÔ∏è Architecture

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1. **Database Schema** (`lib/db/analytics-schema.sql`) - —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
   —Å–æ–±—ã—Ç–∏–π
2. **API Routes** (`/api/analytics/*`) - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è
3. **Analytics Hook** (`lib/hooks/useAnalytics.ts`) - –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
4. **UI Component** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π ProjectsRightSidebar —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **Auto-tracking** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ layout –≤–∏–¥–∂–µ—Ç–æ–≤

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:

- `view` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–∂–µ—Ç–∞
- `session_start` - –Ω–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏
- `session_end` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `action` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

## üìä Data Flow

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∏–¥–∂–µ—Ç** ‚Üí Hook `useAnalytics` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è**: `view` + `session_start` —Å–æ–±—ã—Ç–∏—è
3. **–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏/—Å–º–µ–Ω–µ –≤–∫–ª–∞–¥–∫–∏**: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `session_end`
4. **–°–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ —Ç–∞–±–ª–∏—Ü–µ `usage_events`
5. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ API
6. **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** –≤ –ø—Ä–∞–≤–æ–º —Å–∞–π–¥–±–∞—Ä–µ –≤–∏–¥–∂–µ—Ç–æ–≤

## üé® UI Features

### Loading States

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

### Data Formatting

- –ß–∏—Å–ª–∞ > 1000 –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ "X.Xk"
- –í—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "Xm Ys" –∏–ª–∏ "Xs"
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —á–∏—Å–µ–ª

### Real-time Updates

- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É –≤–∏–¥–∂–µ—Ç–∞–º–∏
- –ö–µ—à–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîß Customization

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:

```typescript
const { trackAction } = useAnalytics('widget-id')

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
trackAction('button-click', { buttonName: 'generate' })
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫:

```typescript
// –í API –∑–∞–ø—Ä–æ—Å–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å timeframe
/api/analytics/stats/widget-id?timeframe=1d  // 1 –¥–µ–Ω—å
/api/analytics/stats/widget-id?timeframe=7d  // 7 –¥–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
/api/analytics/stats/widget-id?timeframe=30d // 30 –¥–Ω–µ–π
```

## üöÄ Next Steps

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ:

- –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –¢–æ—á–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Å—Å–∏–π
- –ê–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –≤–∏–¥–∂–µ—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üéâ
