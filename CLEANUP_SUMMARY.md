# üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—Å—Ç–∫–∏ –ø–∞–ø–∫–∏ lib/

**–î–∞—Ç–∞:** 2025-10-11
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –î–æ | –ü–æ—Å–ª–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|-----------|-----|-------|-----------|
| –í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤ –≤ lib/ | 108 | ~70 | **-38 —Ñ–∞–π–ª–æ–≤ (-35%)** |
| –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ | 71 (66%) | 0 (0%) | **-71 —Ñ–∞–π–ª** |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ —É–¥–∞–ª–µ–Ω–æ | ~1500+ | - | **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ** |

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –≠—Ç–∞–ø 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

**–£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 30

1. **lib/scripts/** (–ø–∞–ø–∫–∞ —Ü–µ–ª–∏–∫–æ–º) - 18 –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
   - add-css-variables-ru.ts
   - add-live-code-example-post.ts
   - add-russian-posts.ts
   - add-test-post.ts
   - check-analytics-setup.ts
   - check-events.ts
   - check-supabase.ts
   - count-widgets.ts
   - fix-base64-encoder.ts
   - fix-widget-imports.ts
   - list-all-posts.ts
   - list-posts.ts
   - migrate-posts.ts
   - migrate-to-supabase.ts
   - populate-widgets-supabase.ts
   - test-supabase-simple.ts
   - update-widget-design.ts
   - verify-supabase-setup.ts

2. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ widget hooks** - 9 —Ñ–∞–π–ª–æ–≤
   - lib/hooks/widgets/useLoanCalculator.ts
   - lib/hooks/widgets/useBMICalculator.ts
   - lib/hooks/widgets/useConverter.ts
   - lib/hooks/widgets/usePercentageCalculator.ts
   - lib/hooks/widgets/useSpecialSymbolsPicker.ts
   - lib/hooks/widgets/useGenerator.ts
   - lib/hooks/widgets/useCompoundInterestCalculator.ts
   - lib/hooks/widgets/useAsciiArtGenerator.ts
   - lib/hooks/widgets/useCalculator.ts

3. **–û–±–Ω–æ–≤–ª—ë–Ω:** lib/hooks/widgets/index.ts
   - –£–¥–∞–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤
   - –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ 3 –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ö—É–∫–∞

4. **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã** - 2 —Ñ–∞–π–ª–∞ (–ø–æ–∑–∂–µ 1 –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
   - lib/constants/widgetShortcuts.example.ts

---

### –≠—Ç–∞–ø 2: –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞

**–£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 10

1. **Legacy –ë–î –∫–æ–¥** - 7 —Ñ–∞–π–ª–æ–≤
   - lib/db/check-widgets-db.ts
   - lib/db/connection.ts
   - lib/db/safe-query.ts
   - lib/db/schema.ts
   - lib/db/supabase-adapter.ts
   - lib/db/widgets-supabase.ts (313 —Å—Ç—Ä–æ–∫!)
   - lib/db/with-retry.ts
   - **–°–æ—Ö—Ä–∞–Ω—ë–Ω:** lib/db/blog.ts (–ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ Supabase)

2. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –≤–∏–¥–∂–µ—Ç–æ–≤**
   - lib/widgets/index.ts (225 —Å—Ç—Ä–æ–∫!)
   - lib/data/widgets-static.ts

3. **–ü—Ä–æ—á–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã**
   - lib/actions/posts.ts
   - scripts/check-widgets-completeness.ts (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è)

---

### –≠—Ç–∞–ø 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–ü–µ—Ä–µ–ø–∏—Å–∞–Ω–æ:** lib/db/blog.ts
- **–ë—ã–ª–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–µ connection.ts –∏ safe-query.ts —Å SQL —Ç–µ–≥–∞–º–∏
- **–°—Ç–∞–ª–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase SDK –Ω–∞–ø—Ä—è–º—É—é
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∏—â–µ, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–µ–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:** lib/helpers/generateRandomColor.ts
- –ü—Ä–∏—á–∏–Ω–∞: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ components/svg/NotFoundImage.tsx
- –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (3 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞)

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –Ω–∞ ~500KB
- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–º–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- ‚úÖ –£–¥–∞–ª—ë–Ω –≤–µ—Å—å legacy –∫–æ–¥ –ë–î
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)
- ‚úÖ –û—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Supabase)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ = –º–µ–Ω—å—à–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ü—Ä–æ—â–µ –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

### TypeScript
```bash
$ yarn typecheck
‚úì Done in 2.58s
```

### Production Build
```bash
$ yarn build
‚úì Compiled successfully
‚úì Checking validity of types
‚úì Collecting page data
‚úì Generated 70+ routes
‚úì Done in 46.77s
```

### –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∫–∏
- **Routes:** 70+ —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω—ã
- **Build time:** 46.77s
- **–û—à–∏–±–æ–∫:** 0
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:** 0

---

## üìÅ –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ lib/ (–ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏)

```
lib/
‚îú‚îÄ‚îÄ actions/          # –ü—É—Å—Ç–∞—è (—É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)
‚îú‚îÄ‚îÄ analytics/        # Yandex Goals (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ constants/        # widgets.ts –∏ –ø—Ä–æ—á–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ data/             # Data —Ñ–∞–π–ª—ã –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ db/               # –¢–æ–ª—å–∫–æ blog.ts (Supabase)
‚îú‚îÄ‚îÄ fonts/            # –®—Ä–∏—Ñ—Ç—ã
‚îú‚îÄ‚îÄ helpers/          # markdownToHtml + generateRandomColor
‚îú‚îÄ‚îÄ hooks/            # React hooks
‚îÇ   ‚îî‚îÄ‚îÄ widgets/      # –¢–æ–ª—å–∫–æ 3 –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ö—É–∫–∞
‚îú‚îÄ‚îÄ posts/            # –†–∞–±–æ—Ç–∞ —Å –ø–æ—Å—Ç–∞–º–∏ (Supabase)
‚îú‚îÄ‚îÄ remark-plugins/   # Markdown –ø–ª–∞–≥–∏–Ω—ã
‚îú‚îÄ‚îÄ seo/              # SEO —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ supabase/         # Supabase –∫–ª–∏–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã (cn, converters, etc.)
```

---

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –ü–µ—Ä–µ–ø–∏—Å–∞–Ω blog.ts –Ω–∞ Supabase
- ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ
- ‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
- ‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å pre-commit —Ö—É–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã lib/ (lib/README.md)
- ‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∞—É–¥–∏—Ç –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã (1 —Ä–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª)

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ package.json
"scripts": {
  "audit:unused": "tsx scripts/check-unused-files.ts",
  "audit:lib": "tsx scripts/analyze-lib-usage.ts"
}
```

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

–ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –¥–æ—Å—Ç—É–ø–µ–Ω –≤:
**`LIB_ANALYSIS_REPORT.md`**

–û—Ç—á—ë—Ç –≤–∫–ª—é—á–∞–µ—Ç:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–º–ø–æ—Ä—Ç–æ–≤
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
- –ì–æ—Ç–æ–≤—ã–µ bash-–∫–æ–º–∞–Ω–¥—ã
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É

---

## üôè –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –º–∞—Å—à—Ç–∞–±–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ `lib/`:
- –£–¥–∞–ª–µ–Ω–æ **38 –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤**
- –ü–µ—Ä–µ–ø–∏—Å–∞–Ω **legacy –∫–æ–¥ –ë–î** –Ω–∞ Supabase
- –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ **–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è**
- TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫**

–ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞ —Å—Ç–∞–ª–∞ **—á–∏—â–µ**, **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–µ–µ** –∏ **–ª–µ–≥—á–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ**! üéâ

---

**–ê–≤—Ç–æ—Ä:** Claude Code Analysis
**–î–∞—Ç–∞:** 2025-10-11
**–í–µ—Ä—Å–∏—è:** 1.0
